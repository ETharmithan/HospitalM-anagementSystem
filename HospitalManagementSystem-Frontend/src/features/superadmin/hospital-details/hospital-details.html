<div class="hospital-details-container">
  <div class="header">
    <button class="back-btn" (click)="goBack()">
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M19 12H5M12 19l-7-7 7-7"/>
      </svg>
      Back to Dashboard
    </button>
    @if (!isLoading() && hospitalDetails()) {
      <div class="header-info">
        <h1>{{ hospitalDetails()!.name }}</h1>
        <span class="status-badge" [class.active]="hospitalDetails()!.isActive">
          {{ hospitalDetails()!.isActive ? 'Active' : 'Inactive' }}
        </span>
      </div>
    }
  </div>

  @if (isLoading()) {
    <div class="loading-container">
      <div class="spinner"></div>
      <p>Loading hospital details...</p>
    </div>
  }

  @if (!isLoading() && hospitalDetails()) {
    <!-- Statistics Cards -->
    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-icon departments">üè•</div>
        <div class="stat-info">
          <span class="stat-value">{{ hospitalDetails()!.totalDepartments }}</span>
          <span class="stat-label">Departments</span>
        </div>
      </div>
      <div class="stat-card">
        <div class="stat-icon doctors">üë®‚Äç‚öïÔ∏è</div>
        <div class="stat-info">
          <span class="stat-value">{{ hospitalDetails()!.totalDoctors }}</span>
          <span class="stat-label">Doctors</span>
        </div>
      </div>
      <div class="stat-card">
        <div class="stat-icon admins">üë§</div>
        <div class="stat-info">
          <span class="stat-value">{{ hospitalDetails()!.totalAdmins }}</span>
          <span class="stat-label">Admins</span>
        </div>
      </div>
      <div class="stat-card">
        <div class="stat-icon bookings">üìÖ</div>
        <div class="stat-info">
          <span class="stat-value">{{ hospitalDetails()!.totalBookings }}</span>
          <span class="stat-label">Total Bookings</span>
        </div>
      </div>
      <div class="stat-card">
        <div class="stat-icon upcoming">üîî</div>
        <div class="stat-info">
          <span class="stat-value">{{ hospitalDetails()!.upcomingBookings }}</span>
          <span class="stat-label">Upcoming</span>
        </div>
      </div>
      <div class="stat-card">
        <div class="stat-icon completed">‚úÖ</div>
        <div class="stat-info">
          <span class="stat-value">{{ hospitalDetails()!.completedBookings }}</span>
          <span class="stat-label">Completed</span>
        </div>
      </div>
    </div>

    <!-- Tabs -->
    <div class="tabs">
      <button class="tab-btn" [class.active]="activeTab() === 'overview'" (click)="setActiveTab('overview')">
        Overview
      </button>
      <button class="tab-btn" [class.active]="activeTab() === 'departments'" (click)="setActiveTab('departments')">
        Departments ({{ hospitalDetails()!.totalDepartments }})
      </button>
      <button class="tab-btn" [class.active]="activeTab() === 'admins'" (click)="setActiveTab('admins')">
        Admins ({{ hospitalDetails()!.totalAdmins }})
      </button>
      <button class="tab-btn" [class.active]="activeTab() === 'bookings'" (click)="setActiveTab('bookings')">
        Bookings
      </button>
    </div>

    <!-- Tab Content -->
    <div class="tab-content">
      <!-- Overview Tab -->
      @if (activeTab() === 'overview') {
        <div class="overview-section">
          <div class="info-card">
            <h2>Hospital Information</h2>
            <div class="info-grid">
              <div class="info-item">
                <span class="label">Address:</span>
                <span class="value">{{ hospitalDetails()!.address }}</span>
              </div>
              <div class="info-item">
                <span class="label">City:</span>
                <span class="value">{{ hospitalDetails()!.city }}</span>
              </div>
              <div class="info-item">
                <span class="label">State:</span>
                <span class="value">{{ hospitalDetails()!.state }}</span>
              </div>
              <div class="info-item">
                <span class="label">Country:</span>
                <span class="value">{{ hospitalDetails()!.country }}</span>
              </div>
              <div class="info-item">
                <span class="label">Postal Code:</span>
                <span class="value">{{ hospitalDetails()!.postalCode }}</span>
              </div>
              <div class="info-item">
                <span class="label">Phone:</span>
                <span class="value">{{ hospitalDetails()!.phoneNumber }}</span>
              </div>
              <div class="info-item">
                <span class="label">Email:</span>
                <span class="value">{{ hospitalDetails()!.email }}</span>
              </div>
              @if (hospitalDetails()!.website) {
                <div class="info-item">
                  <span class="label">Website:</span>
                  <span class="value">
                    <a [href]="hospitalDetails()!.website" target="_blank">{{ hospitalDetails()!.website }}</a>
                  </span>
                </div>
              }
              <div class="info-item full-width">
                <span class="label">Created:</span>
                <span class="value">{{ hospitalDetails()!.createdAt | date:'medium' }}</span>
              </div>
              @if (hospitalDetails()!.description) {
                <div class="info-item full-width">
                  <span class="label">Description:</span>
                  <span class="value">{{ hospitalDetails()!.description }}</span>
                </div>
              }
            </div>
          </div>
        </div>
      }

      <!-- Departments Tab -->
      @if (activeTab() === 'departments') {
        <div class="departments-section">
          @if (hospitalDetails()!.departments.length === 0) {
            <div class="empty-state">
              <span class="empty-icon">üè•</span>
              <h3>No Departments</h3>
              <p>This hospital doesn't have any departments yet.</p>
            </div>
          } @else {
            <div class="cards-grid">
              @for (dept of hospitalDetails()!.departments; track dept.departmentId) {
                <div class="department-card">
                  <h3>{{ dept.name }}</h3>
                  @if (dept.description) {
                    <p class="description">{{ dept.description }}</p>
                  }
                  <div class="department-stats">
                    <span class="stat">
                      <span class="icon">üë®‚Äç‚öïÔ∏è</span>
                      {{ dept.doctorCount }} {{ dept.doctorCount === 1 ? 'Doctor' : 'Doctors' }}
                    </span>
                  </div>
                </div>
              }
            </div>
          }
        </div>
      }

      <!-- Admins Tab -->
      @if (activeTab() === 'admins') {
        <div class="admins-section">
          @if (hospitalDetails()!.admins.length === 0) {
            <div class="empty-state">
              <span class="empty-icon">üë§</span>
              <h3>No Admins</h3>
              <p>This hospital doesn't have any admins assigned yet.</p>
            </div>
          } @else {
            <div class="cards-grid">
              @for (admin of hospitalDetails()!.admins; track admin.userId) {
                <div class="admin-card">
                  <div class="admin-avatar">{{ admin.username.charAt(0).toUpperCase() }}</div>
                  <div class="admin-info">
                    <h3>{{ admin.username }}</h3>
                    <p>{{ admin.email }}</p>
                    <span class="status-badge" [class.active]="admin.isActive">
                      {{ admin.isActive ? 'Active' : 'Inactive' }}
                    </span>
                  </div>
                </div>
              }
            </div>
          }
        </div>
      }

      <!-- Bookings Tab -->
      @if (activeTab() === 'bookings') {
        <div class="bookings-section">
          <div class="booking-stats-grid">
            <div class="booking-stat-card upcoming">
              <div class="stat-header">
                <span class="icon">üîî</span>
                <h3>Upcoming Bookings</h3>
              </div>
              <div class="stat-number">{{ hospitalDetails()!.upcomingBookings }}</div>
            </div>
            <div class="booking-stat-card completed">
              <div class="stat-header">
                <span class="icon">‚úÖ</span>
                <h3>Completed Bookings</h3>
              </div>
              <div class="stat-number">{{ hospitalDetails()!.completedBookings }}</div>
            </div>
            <div class="booking-stat-card cancelled">
              <div class="stat-header">
                <span class="icon">‚ùå</span>
                <h3>Cancelled Bookings</h3>
              </div>
              <div class="stat-number">{{ hospitalDetails()!.cancelledBookings }}</div>
            </div>
          </div>
        </div>
      }
    </div>
  }
</div>
