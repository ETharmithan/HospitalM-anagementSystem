<div class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-6">
  <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-4">
    Select Time Slot
    @if (appointmentDuration) {
      <span class="text-sm font-normal text-gray-500 dark:text-gray-400">
        ({{ appointmentDuration }} min appointment)
      </span>
    }
  </h3>

  @if (timeSlots.length === 0) {
    <div class="text-center py-8 text-gray-500 dark:text-gray-400">
      <p>No time slots available for this date.</p>
      <p class="text-sm mt-2">Please select a different date.</p>
    </div>
  } @else {
    <div class="grid grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3">
      @for (slot of timeSlots; track slot.time) {
        <button
          (click)="onTimeSelect(slot.time)"
          [disabled]="!slot.available"
          [class.bg-blue-600]="selectedTime === slot.time && slot.available"
          [class.text-white]="selectedTime === slot.time && slot.available"
          [class.bg-gray-100]="selectedTime !== slot.time && slot.available"
          [class.dark:bg-gray-700]="selectedTime !== slot.time && slot.available"
          [class.dark:text-gray-300]="selectedTime !== slot.time && slot.available"
          [class.opacity-50]="!slot.available"
          [class.cursor-not-allowed]="!slot.available"
          [class.line-through]="!slot.available"
          class="px-4 py-3 rounded-lg font-medium transition-all duration-200 hover:bg-blue-500 hover:text-white disabled:hover:bg-gray-100 disabled:hover:text-gray-400 dark:disabled:hover:bg-gray-700"
          [title]="slot.reason || (slot.available ? 'Available' : 'Not available')">
          {{ formatTime(slot.time) }}
        </button>
      }
    </div>

    @if (!hasAvailableSlots) {
      <div class="mt-4 p-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg">
        <p class="text-sm text-yellow-800 dark:text-yellow-200">
          ⚠️ All time slots are booked for this date. Please select another date.
        </p>
      </div>
    }
  }
</div>

