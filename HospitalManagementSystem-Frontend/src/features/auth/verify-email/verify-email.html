<div class="verify-container">
  <div class="verify-card">
    <div class="verify-header">
      <div class="icon-container">
        <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <rect width="20" height="16" x="2" y="4" rx="2"/>
          <path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"/>
        </svg>
      </div>
      <h1>Verify Your Email</h1>
      <p class="subtitle">We've sent a 6-digit verification code to</p>
      <p class="email">{{ email() }}</p>
    </div>

    <form [formGroup]="otpForm" (ngSubmit)="onSubmit()" class="verify-form">
      <div class="form-group">
        <label for="otp">Enter Verification Code</label>
        <input
          type="text"
          id="otp"
          formControlName="otp"
          placeholder="000000"
          maxlength="6"
          class="otp-input"
          [class.error]="otp?.invalid && otp?.touched"
          autocomplete="one-time-code"
        />
        @if (otp?.invalid && otp?.touched) {
          <span class="error-message">
            @if (otp?.errors?.['required']) {
              Please enter the verification code
            } @else if (otp?.errors?.['pattern']) {
              Please enter a valid 6-digit code
            }
          </span>
        }
      </div>

      <button 
        type="submit" 
        class="btn-verify"
        [disabled]="isLoading()"
      >
        @if (isLoading()) {
          <span class="spinner"></span>
          Verifying...
        } @else {
          Verify Email
        }
      </button>
    </form>

    <div class="resend-section">
      <p>Didn't receive the code?</p>
      <button 
        type="button" 
        class="btn-resend"
        [disabled]="countdown() > 0 || isResending()"
        (click)="resendOtp()"
      >
        @if (isResending()) {
          Sending...
        } @else if (countdown() > 0) {
          Resend in {{ countdown() }}s
        } @else {
          Resend Code
        }
      </button>
    </div>

    <div class="back-link">
      <a routerLink="/login">Back to Login</a>
    </div>
  </div>
</div>
